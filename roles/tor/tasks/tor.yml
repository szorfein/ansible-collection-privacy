---
- name: tor > installing dependencies...
  ansible.builtin.package:
    name: tor
    state: present

- name: tor > enabling service
  ansible.builtin.service:
    name: tor
    enabled: true

- name: tor > configuring...
  ansible.builtin.lineinfile:
    path: /etc/tor/torrc
    regexp: '{{ item.regexp }}'
    line: '{{ item.line }}'
  with_items:
    - regexp: ^ConnectionPadding
      line: ConnectionPadding 1
    - regexp: ^Sandbox
      line: Sandbox 1
  notify: restart tor
